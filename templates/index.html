<!DOCTYPE html>
<html lang="en">

<head>
   
    
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta property=”og:title” content=”Spotbot” />
    <meta property=”og:image” content=”” />

    <title>Spotbot</title>
    <meta name="description" content="Control spotify" />
    <meta name="robots" content="index, archive" />
    <link rel="icon" type="image/x-icon" href="">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.7.0.min.js" integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    
    <style>
    

    </style>

   

</head>

<body>
    <h1>Spotify OAuth Demo</h1>
    <button id="authorizeBtn">Authorize Spotify</button>
    <p id="authStatus"></p>
    <input type="text" id="inputText" placeholder="Enter text">
    <button id="submitBtn">Submit</button>
    <p id="resultText"></p>
    <script>
        // Get URL parameters
        const urlParams = new URLSearchParams(window.location.search);

        if (urlParams.get('auth_success') === '1') {
            document.getElementById('authStatus').textContent = 'Authenticated';
        } else if (urlParams.get('auth_error') === '1') {
            document.getElementById('authStatus').textContent = 'Error: Authentication failed';
        }

        // Other code...
    </script>
    <script>
        const clientId = "{{ client_id }}";
        const redirectUri = "{{ redirect_uri }}";
        const scope = "{{ scope }}";

        const authorizeBtn = document.getElementById("authorizeBtn");

        authorizeBtn.addEventListener("click", () => {
            const authUrl = `https://accounts.spotify.com/authorize?client_id=${clientId}&response_type=code&redirect_uri=${redirectUri}&scope=${scope}&show_dialog=true`;
            window.location.href = authUrl;
        });
    </script>
    <script>
        const inputText = document.getElementById("inputText");
        const submitBtn = document.getElementById("submitBtn");
        const resultText = document.getElementById("resultText");

        submitBtn.addEventListener("click", async () => {
            const text = inputText.value.trim();
            if (text) {
                try {
                    const response = await fetch('/submit', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({text: text})
                    });
                    const result = await response.json();
                    if (result.error) {
                        resultText.textContent = 'Error: ' + result.error;
                    } else {
                        resultText.textContent = result.result;
                    }
                } catch (error) {
                    console.error('Error:', error);
                    resultText.textContent = 'Error: ' + error;
                }
            }
        });
    </script>
</body>

</html>